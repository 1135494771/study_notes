# [.NetCore入门笔记](#.NetCore入门笔记)

## 目录

- ### 1.Web Api 俩种风格：面向过程(RPC)、面向REST

- ### 2.RPC:"控制器/操作方法"的形式把服务器端的代码当成方法调用。比如：/Persons/GetAll、/Persions/GetById?=8、/Persions/Update、/Persions/DeleteById/8

- ### 3.REST:按照HTTP语义来使用HTTP协议：

  - #### 1. URL用于资源的定于：/users/8、/users/8/orders

  - #### 2. HTTP谓词：GET、POST(新增)、PUT(整体更新)、PATCH(部分更新)、DELET

  - #### 3.什么是幂等？一个操作动作执行一次和执行多次的结果一样。 幂等操作：Get、Delete、Put； 不幂等：Post、Patch

  - #### 4.Get的响应可以缓存

  - #### 5.服务端要通过状态码来反映获取资源的结果

- ### 3.1.REST缺点

  - #### 1. 不是所有操作都可以对应到正确的HTTP谓词中。比如：一段代码又有新增，又有修改

  - #### 2. 系统的迭代可能会改变幂等性。比如：更开始方法就是一个查询，不熟悉业务的人，现在方法里又做了新增的操作

  - #### 3. 通过URL资源定位不太符合中国人开发的习惯

  - #### 4. 如果Get请求参数内容超过了URL的限制，由于GET和PUT都是幂等的，可以用PUT来请求，然后通过请求体来传递参数，这明显和HTTP语意不符

- ### 实现建议

  - #### 1.路径使用RPC风格：Users/AddUser、Users/GetAll、Users/DeleteById

  - #### 2.对于可以缓存的操作，使用Get；对于幂等更新操作，使用Put；对于幂等删除操作，使用Delete；对于其他操作，统一使用Post请求

  - #### 3.参数：保存、更新类的请求使用Post、Put请求，把参数放到请求报文体中；对于Get和Delete请求，把参数放到QueryString中。推荐尽量使用URL资源定位

  - #### 4.对于业务错误，服务器端返回合适的4××状态码，不知道那个选择400；通过需要在报文体中通过code提供业务错误码和错误信息

  - #### 5.对于业务执行成功，返回200状态码，如果有需要可以给客户端返回报文体信息